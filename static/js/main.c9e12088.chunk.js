(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,s){e.exports=s(20)},17:function(e,t,s){},19:function(e,t,s){},20:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),n=s(3),c=s.n(n),l=(s(17),s(1)),r=s.n(l),h=s(4),o=s(6),u=s(7),d=s(9),k=s(8),v=s(2),p=s(10);s(19);function y(e){var t=e.width,s=e.height,a=e.x,n=e.y;return i.a.createElement("rect",{width:t,height:s,x:a,y:n,className:"rect"})}var S=function(e){function t(e){var s;return Object(o.a)(this,t),(s=Object(d.a)(this,Object(k.a)(t).call(this,e))).handleKeyPressed=function(e){" "!==e.key||s.spacePressed||s.state.gameOver?"r"===e.key&&!s.rPressed&&s.state.gameOver&&(s.rPressed=!0,s.reset()):(s.spacePressed=!0,s.layDownBlock())},s.handleKeyRelease=function(e){" "===e.key?s.spacePressed=!1:"r"===e.key&&(s.rPressed=!1)},s.handleTouch=Object(h.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.state.gameOver){e.next=5;break}return e.next=3,s.layDownBlock();case 3:e.next=6;break;case 5:s.reset();case 6:case"end":return e.stop()}},e)})),s.state={board:[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],gameOver:!1,winner:!1,blink:!0,displayMessage:"STACKER"},s.cellScale=50,s.distance=s.cellScale,s.spacePressed=!1,s.rPressed=!1,s.update=s.update.bind(Object(v.a)(s)),s.handleTouch=s.handleTouch.bind(Object(v.a)(s)),s.messageBlink=s.messageBlink.bind(Object(v.a)(s)),s}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.height=this.cellScale*this.state.board.length,this.width=this.cellScale*this.state.board[0].length,this.intervalId=setInterval(this.update,150),this.setState({yPos:this.height-this.cellScale,inactiveBlocks:Array(0),blocksToSpawn:3},function(){return e.createNewBlocks()}),document.addEventListener("keypress",function(t){return e.handleKeyPressed(t)}),document.addEventListener("keyup",function(t){return e.handleKeyRelease(t)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"layDownBlock",value:function(){var e=Object(h.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkBoard();case 2:this.state.gameOver||(this.state.yPos/this.cellScale===Math.floor((this.state.board.length-1)/3)?this.newTimer(2,85):this.state.yPos/this.cellScale===Math.floor(2*(this.state.board.length-1)/3)&&this.newTimer(3,100),this.createNewBlocks());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkBoard",value:function(){var e=Object(h.a)(r.a.mark(function e(){var t,s,a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.state.yPos),t=this.state.board.slice(),s=0;case 3:if(!(s<this.state.activeBlocks.length)){e.next=21;break}if(a=this.state.activeBlocks[s].props.x,i=this.state.activeBlocks[s].props.y,this.state.yPos!==this.height-this.cellScale){e.next=10;break}t[i/this.cellScale][a/this.cellScale]=1,e.next=18;break;case 10:if(1!==t[i/this.cellScale+1][a/this.cellScale]){e.next=14;break}t[i/this.cellScale][a/this.cellScale]=1,e.next=18;break;case 14:return this.state.activeBlocks.splice(s,1),e.next=17,this.setState({blocksToSpawn:this.state.blocksToSpawn-1},function(){this.setState({gameOver:0===this.state.blocksToSpawn})});case 17:s--;case 18:s++,e.next=3;break;case 21:return e.next=23,this.setState({yPos:this.state.yPos-this.cellScale,board:t,inactiveBlocks:this.state.inactiveBlocks.concat(this.state.activeBlocks)},function(){this.state.yPos<0&&!this.state.gameOver&&this.setState({gameOver:!0,winner:!0})});case 23:this.distance=this.cellScale,console.log(this.state.yPos);case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"newTimer",value:function(e,t){this.state.blocksToSpawn===e&&this.setState({blocksToSpawn:this.state.blocksToSpawn-1}),clearInterval(this.intervalId),this.intervalId=setInterval(this.update,t)}},{key:"reset",value:function(){var e=this;clearInterval(this.intervalId),this.intervalId=setInterval(this.update,150),this.setState({board:[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],gameOver:!1,winner:!1,blink:!0,displayMessage:"STACKER",yPos:this.height-this.cellScale,inactiveBlocks:Array(0),blocksToSpawn:3},function(){return e.createNewBlocks()})}},{key:"createBlock",value:function(e,t){return i.a.createElement(y,{width:this.cellScale,height:this.cellScale,x:e,y:t})}},{key:"createNewBlocks",value:function(){var e=Math.floor(this.width/2/this.cellScale)*this.cellScale,t=Array(0);switch(this.state.blocksToSpawn){case 3:t.push(this.createBlock(e-this.cellScale,this.state.yPos));case 2:t.push(this.createBlock(e,this.state.yPos));case 1:t.push(this.createBlock(e+this.cellScale,this.state.yPos))}this.setState({activeBlocks:t})}},{key:"update",value:function(){this.state.gameOver&&"STACKER"===this.state.displayMessage?(clearInterval(this.intervalId),this.intervalId=setInterval(this.messageBlink,250),this.setState({blocks:this.state.activeBlocks.concat(this.state.inactiveBlocks)})):(this.updateActiveBlocks(),this.setState({blocks:this.state.activeBlocks.concat(this.state.inactiveBlocks)})),this.renderBlocks()}},{key:"messageBlink",value:function(){this.state.blink?this.setState({blink:!1,displayMessage:this.state.winner?"WINNER":"LOSER"}):this.setState({blink:!0,displayMessage:i.a.createElement("span",null,"\xa0\xa0")})}},{key:"updateActiveBlocks",value:function(){var e=this.state.activeBlocks.slice();e[e.length-1].props.x===this.width-this.cellScale?this.distance=-this.cellScale:0===e[0].props.x&&(this.distance=this.cellScale);for(var t=0;t<e.length;t++){var s=e[t].props.y,a=e[t].props.x+this.distance;e[t]=this.createBlock(a,s)}this.setState({activeBlocks:e})}},{key:"renderBlocks",value:function(){c.a.render(this.state.blocks,document.getElementById("canvas"))}},{key:"render",value:function(){return i.a.createElement("div",{className:"root"},i.a.createElement("h1",null,this.state.displayMessage),i.a.createElement("svg",{width:this.width,height:this.height,id:"canvas",className:"canvas",onKeyPress:this.handleKeyPressed,onKeyUp:this.handleKeyRelease,onTouchStart:this.handleTouch}),i.a.createElement("h2",null,this.state.gameOver?"PRESS 'R' TO PLAY AGAIN":"PRESS 'SPACE' TO SET BLOCKS"))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.c9e12088.chunk.js.map