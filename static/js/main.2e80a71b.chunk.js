(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,s){},16:function(t,e,s){},17:function(t,e,s){"use strict";s.r(e);var a=s(0),i=s.n(a),l=s(2),c=s.n(l),n=(s(15),s(4)),h=s(5),o=s(7),r=s(6),v=s(1),d=s(8);s(16);function k(t){var e=t.width,s=t.height,a=t.x,l=t.y;return i.a.createElement("rect",{width:e,height:s,x:a,y:l,className:"rect"})}var u=function(t){function e(t){var s;return Object(n.a)(this,e),(s=Object(o.a)(this,Object(r.a)(e).call(this,t))).handleKeyDown=function(t){" "!==t.key||s.state.gameOver?"r"===t.key&&s.reset():(s.checkBoard(),s.state.gameOver||(s.state.yPos/s.cellScale===Math.floor((s.state.board.length-1)/3)?s.newTimer(2,85):s.state.yPos/s.cellScale===Math.floor(2*(s.state.board.length-1)/3)&&s.newTimer(3,100),s.createNewBlocks()))},s.state={board:[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],gameOver:!1,winner:!1,blink:!0,displayMessage:"STACKER"},s.cellScale=50,s.distance=s.cellScale,s.update=s.update.bind(Object(v.a)(s)),s.messageBlink=s.messageBlink.bind(Object(v.a)(s)),s}return Object(d.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.height=this.cellScale*this.state.board.length,this.width=this.cellScale*this.state.board[0].length,this.intervalId=setInterval(this.update,150),this.setState({yPos:this.height-this.cellScale,inactiveBlocks:Array(0),blocksToSpawn:3},function(){return t.createNewBlocks()}),document.addEventListener("keydown",function(e){return t.handleKeyDown(e)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"checkBoard",value:function(){for(var t=this.state.board.slice(),e=0;e<this.state.activeBlocks.length;e++){var s=this.state.activeBlocks[e].props.x,a=this.state.activeBlocks[e].props.y;this.state.yPos===this.height-this.cellScale?t[a/this.cellScale][s/this.cellScale]=1:1===t[a/this.cellScale+1][s/this.cellScale]?t[a/this.cellScale][s/this.cellScale]=1:(this.state.activeBlocks.splice(e,1),this.setState({blocksToSpawn:this.state.blocksToSpawn-1},function(){this.setState({gameOver:0===this.state.blocksToSpawn})}),e--)}this.setState({yPos:this.state.yPos-this.cellScale,board:t,inactiveBlocks:this.state.inactiveBlocks.concat(this.state.activeBlocks)},function(){this.state.yPos<0&&!this.state.gameOver&&this.setState({gameOver:!0,winner:!0})}),this.distance=this.cellScale}},{key:"newTimer",value:function(t,e){this.state.blocksToSpawn===t&&this.setState({blocksToSpawn:this.state.blocksToSpawn-1}),clearInterval(this.intervalId),this.intervalId=setInterval(this.update,e)}},{key:"reset",value:function(){var t=this;clearInterval(this.intervalId),this.intervalId=setInterval(this.update,150),this.setState({board:[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],gameOver:!1,winner:!1,blink:!0,displayMessage:"STACKER",yPos:this.height-this.cellScale,inactiveBlocks:Array(0),blocksToSpawn:3},function(){return t.createNewBlocks()})}},{key:"createBlock",value:function(t,e){return i.a.createElement(k,{width:this.cellScale,height:this.cellScale,x:t,y:e})}},{key:"createNewBlocks",value:function(){var t=Math.floor(this.width/2/this.cellScale)*this.cellScale,e=Array(0);switch(this.state.blocksToSpawn){case 3:e.push(this.createBlock(t-this.cellScale,this.state.yPos));case 2:e.push(this.createBlock(t,this.state.yPos));case 1:e.push(this.createBlock(t+this.cellScale,this.state.yPos))}this.setState({activeBlocks:e})}},{key:"update",value:function(){this.state.gameOver&&"STACKER"===this.state.displayMessage?(clearInterval(this.intervalId),this.intervalId=setInterval(this.messageBlink,250),this.setState({blocks:this.state.activeBlocks.concat(this.state.inactiveBlocks)})):(this.updateActiveBlocks(),this.setState({blocks:this.state.activeBlocks.concat(this.state.inactiveBlocks)})),this.renderBlocks()}},{key:"messageBlink",value:function(){this.state.blink?this.setState({blink:!1,displayMessage:this.state.winner?"WINNER":"LOSER"}):this.setState({blink:!0,displayMessage:i.a.createElement("span",null,"\xa0\xa0")})}},{key:"updateActiveBlocks",value:function(){var t=this.state.activeBlocks.slice();t[t.length-1].props.x===this.width-this.cellScale?this.distance=-this.cellScale:0===t[0].props.x&&(this.distance=this.cellScale);for(var e=0;e<t.length;e++){var s=t[e].props.y,a=t[e].props.x+this.distance;t[e]=this.createBlock(a,s)}this.setState({activeBlocks:t})}},{key:"renderBlocks",value:function(){c.a.render(this.state.blocks,document.getElementById("canvas"))}},{key:"render",value:function(){return i.a.createElement("div",{className:"root"},i.a.createElement("h1",null,this.state.displayMessage),i.a.createElement("svg",{width:this.width,height:this.height,id:"canvas",className:"canvas",onClick:this.handleKeyDown}),i.a.createElement("h2",null,this.state.gameOver?"PRESS 'R' TO PLAY AGAIN":"PRESS 'SPACE' TO SET BLOCKS"))}}]),e}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(u,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},9:function(t,e,s){t.exports=s(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.2e80a71b.chunk.js.map